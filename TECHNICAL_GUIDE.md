# PDF 自动化生成项目：技术架构解析

本项目已从 **LaTeX 方案** 切换为 **Typst 方案**，旨在提供一个更稳定、更快速、更现代的报告生成工具。

## 1. 核心术语说明

### API (接口)
*   **定义**：API 是前端（网页）与后端（服务器）沟通的桥梁。
*   **通俗理解**：它是餐厅的**服务台窗口**。前端不需要知道后端是怎么运行的，只需要把数据（点菜单）按规定格式递进去，后端就会把结果（PDF）吐出来。
*   **本项目地址**：`http://localhost:8000/generate`

### JSON (数据交换格式)
*   **定义**：一种轻量级的文本数据格式，人类和电脑都能读懂。
*   **角色**：它是 API 窗口接收的**标准点菜单**。
*   **样子**：`{"title": "我的报告", "author": "张三"}`

### curl (请求工具)
*   **定义**：一个在命令行中发起网络请求的工具。
*   **角色**：在没有网页界面之前，它是我们的**模拟顾客**。
*   **作用**：用来验证后端的“窗口”是否真的能干活。

### FastAPI (后端框架)
*   **角色**：**服务员**。
*   **职责**：监听 API 窗口，接收 JSON 数据，调用 Typst 编译器，并将生成的 PDF 返回给用户。

### Typst (现代排版引擎)
*   **角色**：**后厨机器**。
*   **特点**：比 LaTeX 更快、更稳。它能直接读取 JSON 数据进行排版，消灭了反斜杠转义等报错地狱。

---

## 2. 系统工作流

1.  **用户操作**：在前端网页（React）输入内容，点击“生成”。
2.  **数据传输**：前端将内容打包成 **JSON**，通过 **API** 发送给后端。
3.  **后端处理 (FastAPI)**：
    *   创建一个临时文件夹。
    *   将排版模板 (`.typ`)、字体和 JSON 数据放进去。
    *   运行 **Typst** 编译命令。
4.  **结果反馈**：后端将生成的 **PDF** 发回给前端。
5.  **用户下载**：浏览器接收到文件，弹出下载提示。

---

## 3. 为什么选择 Typst 而不是 LaTeX？

| 特性 | LaTeX | Typst |
| :--- | :--- | :--- |
| **编译速度** | 慢 (5-10秒) | 极快 (0.1秒) |
| **转义字符** | 极其严苛 (%, &, \ 等易报错) | 宽容 (类似 Markdown) |
| **数据绑定** | 需 Python 渲染字符串 (易碎) | 原生支持读取 JSON (稳健) |
| **环境依赖** | 庞大 (几 GB) | 极小 (几 MB) |

---

## 4. 后续学习建议

*   **理解 JSON**：这是前后端交流的唯一语言，理解了 JSON 的层级结构，你就理解了数据的流动。
*   **理解异步请求**：前端发请求给后端是需要时间的，就像点完菜要等厨师炒菜一样。
*   **Typst 语法**：可以把它看作是“加强版的 Markdown”，学习它的 `grid` 布局和 `table` 定义。
